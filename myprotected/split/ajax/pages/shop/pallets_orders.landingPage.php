<?php 	// Start header content	$headParams = array( 'parent'=>$parent, 'alias'=>$alias, 'id'=>$id, 'appTable'=>$appTable, 'type'=>'orderLand' ); // menuLandingHeader		$data['headContent'] = $zh->getLandingHeader($headParams);		// Get page items		$itemsList = $zh->getOrders($params,false,2);	$totalItems = $zh->getOrders($params,true,2);		// Get positions List		$sitePositions = $zh->getPositions();		// Prepare arrays for filter		$sitePositionsFilter = array();	foreach($sitePositions as $pos)	{		$sitePositionsFilter[$pos['name']]=$pos['id'];	}		// Pagination operations		$on_page = (isset($_COOKIE['global_on_page']) ? $_COOKIE['global_on_page'] : GLOBAL_ON_PAGE);		$pages = ceil($totalItems/$on_page);		$start_page = (isset($params['start']) ? $params['start'] : 1);		$frst_page = 1;	$prev_page = 1;	$next_page = $pages;	$last_page = $pages;					if($start_page < $pages) $next_page = $start_page+1;	if($start_page > 1) $prev_page = $start_page-1;		// Filter JS open		if(isset($_COOKIE['filter-1']) && $_COOKIE['filter-1']) $data['filter']['f1'] = 1;	if(isset($_COOKIE['filter-2']) && $_COOKIE['filter-2']) $data['filter']['f2'] = 1;	if(isset($_COOKIE['filter-3']) && $_COOKIE['filter-3']) $data['filter']['f3'] = 1;		// Filter arrays	$filter1_options = array( 'By ID'=>'M.id', 'By BUH NUM'=>'M.buch_num', 'By UserID'=>'M.user_id', 'By Status'=>'M.status' );		$filter2_options = array( 							'Статус заказа'	=> array( 'fieldName'=>'M.status', 'params' => array('New'=>'1', 'Confirmed'=>'2', 'Active'=>'3', 'Finished'=>'4', 'Canceled'=>'5') ),							'Статус оплаты'	=> array( 'fieldName'=>'M.pay_status_id', 'params' => array('Not paid'=>'1', 'Partially paid'=>'2', 'Paid'=>'3', 'Declined'=>'4') )							);								$filter3_options = array( 							'sort' => array( 'Finish Date'=>'finish_date', 'ID'=>'id', 'Статусу заказа'=>'status', 'Статусу оплаты'=>'pay_status_id', 'Amount'=>'total'),							'order' => array( 'По возрастанию'=>'', 'По убыванию'=>' DESC' ) 							);	// Start data content		$filterFormParams = array(	'params'=>$params, 								'headParams'=>$headParams, 								'filter1_options'=>$filter1_options, 								'filter2_options'=>$filter2_options, 								'filter3_options'=>$filter3_options, 								'on_page'=>$on_page 							  );		$filterFormStr = $zh->getLandingFilterForm($filterFormParams);		// Table structure		$tableColumns = array(						  'Checkbox'			=>	array('type'=>'checkbox',	'field'=>''),						  'BUH NUM'				=>	array('type'=>'text',		'field'=>'buch_num'),						  'ORDERNUM'			=>	array('type'=>'text',		'field'=>'ordernum'),						  'Client ID'			=>	array('type'=>'text',		'field'=>'user_id'),						  'Doc'					=>	array('type'=>'download',	'field'=>'doc', 'params'=>array( 'path'=>RSF."/split/files/content/") ),						  'Client'				=>	array('type'=>'email',		'field'=>'user_email'),						  'Amount (shekel)'		=>	array('type'=>'text',		'field'=>'total'),						  'Status'				=>	array('type'=>'text',		'field'=>'status_name'),						  'Payment'				=>	array('type'=>'payment_status_name',		'field'=>'payment_status_name'),						  'Deadline '			=>	array('type'=>'date',		'field'=>'finish_date', 'params'=>array('format'=>'d/m/Y') ),						  'Invoices'			=>	array('type'=>'orderInvoices',	'field'=>'История инвойсов'),						  'View'				=>	array('type'=>'cardView',	'field'=>'Смотреть', 'lpx'=>false),						  'Edit'				=>	array('type'=>'cardEdit',	'field'=>'Редактировать', 'lpx'=>false),						  'ID'					=>	array('type'=>'text',		'field'=>'id')						  );		$tableParams = array( 'itemsList'=>$itemsList, 'tableColumns'=>$tableColumns, 'headParams'=>$headParams );		$tableStr = $zh->getItemsTable($tableParams, 'orders');		// START PAGINATION		$pagiParams = array( 'headParams'=>$headParams, 'start_page'=>$start_page, 'pages'=>$pages, 'on_page'=>$on_page );		$pagiStr = $zh->getLandingPagination($pagiParams);		// Join Content		$data['bodyContent'] = $filterFormStr;		$data['bodyContent'] .= $tableStr;		$data['bodyContent'] .= $pagiStr;?>